# 關鍵詞評分與GPT人工評估差異說明

## 📊 兩種評估方式的本質差異

### 🎯 關鍵詞評分 (KEYWORD_COVERAGE)

**評估邏輯**：
- 純粹**字面匹配**，計算回答中包含多少「應回答之詞彙」
- 使用簡單的字串比對或詞彙提取
- 評分 = 命中的關鍵詞數量 / 總關鍵詞數量

**特點**：
- ✅ **客觀、一致**：同樣的文字永遠得到相同分數
- ✅ **快速**：毫秒級計算
- ❌ **缺乏語境理解**：只看有無該詞，不管用法是否正確
- ❌ **忽略同義詞**：「汽車」≠「車輛」

### 🤖 GPT人工評估 (GPT_OVERALL)

**評估邏輯**：
- **多維度綜合判斷**：相關性、完整性、準確性、忠實度
- 理解**語境和意圖**
- 考慮**表達方式**和**邏輯連貫性**

**特點**：
- ✅ **深度理解**：能判斷內容品質和適切性
- ✅ **同義詞識別**：認得不同表達方式
- ✅ **邏輯評估**：判斷回答是否合理
- ❌ **主觀性**：可能因prompt或模型版本而異

## 🔍 為什麼GPT評分通常較高？

### 1. **評估標準寬鬆**

```python
# 關鍵詞評分：嚴格匹配
if "特定詞彙" in answer:  # 必須完全一致
    score += 1

# GPT評分：理解意圖
# 即使沒有確切詞彙，但意思對了就給分
```

### 2. **同義詞容忍度**

- **關鍵詞**：「減少成本」≠「降低費用」→ 0分
- **GPT**：理解兩者意思相同 → 給分

### 3. **語境理解**

```text
問題：如何提升效率？
關鍵詞要求：「自動化、流程優化」

回答A：「透過系統自動化和改善工作流程來提升效率」
- 關鍵詞評分：50%（只有「自動化」，沒有「流程優化」）
- GPT評分：85%（理解「改善工作流程」=「流程優化」）
```

### 4. **整體性評估**

GPT評估四個維度：

1. **相關性 (Relevance)**：回答是否切題
2. **完整性 (Completeness)**：是否包含必要資訊  
3. **準確性 (Accuracy)**：資訊是否正確
4. **忠實度 (Faithfulness)**：是否基於原始資料

即使關鍵詞覆蓋不完整，但如果回答**邏輯清晰、內容相關**，GPT仍會給予不錯的分數。

## 💡 實際案例分析

### 案例：投資風險管理

**問題**：「請說明投資風險管理的重要性」

**應回答詞彙**：「風險評估、多元化、停損點、資產配置」

**回答範例**：
> 「投資時必須進行全面的風險分析，透過分散投資不同標的來降低整體風險，並設定明確的虧損上限，合理安排各類資產比重...」

**評分差異**：
- **關鍵詞評分**：25%（4個詞中只直接命中「資產」）
- **GPT評分**：78%（內容充實且邏輯正確，GPT理解「風險分析」=「風險評估」等同義表達）

### 同義詞對照表

| 關鍵詞要求 | GPT能理解的同義表達 | 關鍵詞評分 | GPT評分 |
|------------|-------------------|------------|---------|
| 風險評估 | 風險分析、風險檢視 | ❌ 0分 | ✅ 給分 |
| 多元化 | 分散投資、多樣化配置 | ❌ 0分 | ✅ 給分 |
| 停損點 | 虧損上限、止損設定 | ❌ 0分 | ✅ 給分 |
| 資產配置 | 各類資產比重 | ✅ 部分給分 | ✅ 給分 |

## 📈 評分模式比較

### 關鍵詞評分特性

```
嚴格度：★★★★★
速度：  ★★★★★
理解力：★☆☆☆☆
彈性：  ★☆☆☆☆
客觀性：★★★★★
```

### GPT評分特性

```
嚴格度：★★☆☆☆
速度：  ★★☆☆☆
理解力：★★★★★
彈性：  ★★★★★
客觀性：★★★☆☆
```

## 🎯 建議使用策略

### 1. **階段性評估**

- **第一階段**：關鍵詞評分進行**初步篩選**
- **第二階段**：GPT評分進行**深度品質評估**

### 2. **權重配置建議**

| 使用情境 | 關鍵詞權重 | GPT權重 | 說明 |
|----------|------------|---------|------|
| 嚴格檢核 | 70% | 30% | 重視詞彙完整性 |
| 平衡評估 | 40% | 60% | 兼顧客觀與理解 |
| 品質導向 | 20% | 80% | 重視內容品質 |

### 3. **適用場景**

**關鍵詞評分適用於**：
- 法規文件檢核
- 標準作業程序驗證
- 必要資訊覆蓋檢查

**GPT評分適用於**：
- 內容品質評估
- 邏輯性檢驗
- 使用者體驗評估

## ⚡ 系統實作重點

在 `streamlit_dashboard_v2_with_manual_gpt.py` 中：

### 關鍵詞評分實作

```python
# 第1056-1058行：關鍵詞評分計算
keywords = evaluator.extract_keywords(reference_text)
orig_kw_score, orig_matched, orig_details = evaluator.calculate_keyword_coverage(answer_original, keywords)
opt_kw_score, opt_matched, opt_details = evaluator.calculate_keyword_coverage(answer_optimized, keywords)
```

### GPT評分整合

```python
# 第590-600行：綜合評分計算
results_df['FINAL_SCORE_ORIGINAL'] = (
    results_df['KEYWORD_COVERAGE_ORIGINAL'] * weights['keyword'] +
    results_df['SEMANTIC_SIMILARITY_ORIGINAL'] * weights['semantic'] +
    results_df['GPT_OVERALL_ORIGINAL'] * weights['gpt']
)
```

## 🏆 結論

**關鍵詞評分**與**GPT人工評估**各有優勢：

- **關鍵詞評分**：提供**客觀基準**，確保必要資訊不遺漏
- **GPT評分**：提供**深度理解**，評估整體品質與適切性

**建議採用組合策略**，透過權重調整平衡兩者優勢，達到既客觀又智能的評估效果。

---

*本文檔基於 RAG 評估儀表板 v2.0 系統分析編寫*